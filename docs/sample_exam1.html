<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Vebash Naidoo" />

<meta name="date" content="2020-10-11" />

<title>Sample Exam 1</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/master/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R4DS Book - Prep for exam</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Sample Exam 1</h1>
<h4 class="author">Vebash Naidoo</h4>
<h4 class="date">10/11/2020</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span> workflowr <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> </a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2020-11-21
</p>
<p>
<strong>Checks:</strong> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7 <span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>r4ds_book/</code> <span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed."> </span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a> analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version 1.6.2). The <em>Checks</em> tab describes the reproducibility checks that were applied when the results were created. The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date </a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20200814code"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Seed:</strong> <code>set.seed(20200814)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20200814code" class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20200814)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Session information:</strong> recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be confident that you successfully produced the results during this run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomsciencificityR4DSstudyexamstree6e7b3db6d0e7fa527d843407cafe965d5f7acd67targetblank6e7b3dba"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Repository version:</strong> <a href="https://github.com/sciencificity/R4DS_study_exams/tree/6e7b3db6d0e7fa527d843407cafe965d5f7acd67" target="_blank">6e7b3db</a> </a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcomsciencificityR4DSstudyexamstree6e7b3db6d0e7fa527d843407cafe965d5f7acd67targetblank6e7b3dba" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility.
</p>
<p>
The results in this page were generated with repository version <a href="https://github.com/sciencificity/R4DS_study_exams/tree/6e7b3db6d0e7fa527d843407cafe965d5f7acd67" target="_blank">6e7b3db</a>. See the <em>Past versions</em> tab to see a history of the changes made to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rproj.user/

Untracked files:
    Untracked:  analysis/images/
    Untracked:  code_snipp.txt
    Untracked:  data/at_health_facilities.csv
    Untracked:  data/infant_hiv.csv
    Untracked:  data/measurements.csv
    Untracked:  data/person.csv
    Untracked:  data/ranking.csv
    Untracked:  data/visited.csv

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the repository in which changes were made to the R Markdown (<code>analysis/sample_exam1.Rmd</code>) and HTML (<code>docs/sample_exam1.html</code>) files. If you’ve configured a remote Git repository (see <code>?wflow_git_remote</code>), click on the hyperlinks in the table below to view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/sciencificity/R4DS_study_exams/blob/6e7b3db6d0e7fa527d843407cafe965d5f7acd67/analysis/sample_exam1.Rmd" target="_blank">6e7b3db</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-21
</td>
<td>
started creating some
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/7ed0458900c1f46198c63e4abf18223bec6e4a2f/docs/sample_exam1.html" target="_blank">7ed0458</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-10
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/sciencificity/R4DS_study_exams/blob/8864bd0c4383ec6f797c857c22fea24b837fad65/analysis/sample_exam1.Rmd" target="_blank">8864bd0</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-10
</td>
<td>
added ch17
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<pre class="r"><code>library(tidyverse)
library(flair)
library(gt)
library(skimr)
library(emo)
library(tidyquant)
library(lubridate)
library(magrittr)
library(janitor)</code></pre>
<div id="question-1" class="section level2">
<h2>Question 1</h2>
<p>The file at_health_facilities.csv contains a tidy dataset with four columns:</p>
<ul>
<li>The ISO3 code of the country that reported data.</li>
<li>The year for which data was reported.</li>
<li>The percentage of HIV-positive children born to HIV-positive mothers age 15–17.</li>
<li>The percentage of HIV-positive children born to HIV-positive mothers age 20–34.</li>
</ul>
<p>Please answer the following questions:</p>
<ul>
<li>How many countries reported data?</li>
<li>What is the difference between the minimum and maximum year with valid data for each country?</li>
<li>How many countries reported data in 3 or more years?</li>
<li>Which countries reported 100% incidence for at least one year in either age group?</li>
</ul>
<pre class="r"><code>health_data &lt;- read_csv(&quot;./data/at_health_facilities.csv&quot;,
                        na = c(&quot;&quot;, &quot;NA&quot;, &quot;-&quot;))
health_data %&gt;% 
  skim()</code></pre>
<table>
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">Piped data</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">225</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">iso3</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">100</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">2007.83</td>
<td align="right">3.90</td>
<td align="right">2000</td>
<td align="right">2005</td>
<td align="right">2008</td>
<td align="right">2011</td>
<td align="right">2014</td>
<td align="left">▃▇▇▇▇</td>
</tr>
<tr class="even">
<td align="left">age 15-17</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">66.21</td>
<td align="right">26.92</td>
<td align="right">5</td>
<td align="right">45</td>
<td align="right">69</td>
<td align="right">92</td>
<td align="right">100</td>
<td align="left">▂▃▅▆▇</td>
</tr>
<tr class="odd">
<td align="left">age 20-34</td>
<td align="right">4</td>
<td align="right">0.98</td>
<td align="right">67.21</td>
<td align="right">26.56</td>
<td align="right">5</td>
<td align="right">45</td>
<td align="right">70</td>
<td align="right">90</td>
<td align="right">100</td>
<td align="left">▂▃▃▅▇</td>
</tr>
</tbody>
</table>
<pre class="r"><code># How many countries reported data
health_data %&gt;% 
  count(iso3, sort = TRUE)</code></pre>
<pre><code># A tibble: 100 x 2
   iso3      n
   &lt;chr&gt; &lt;int&gt;
 1 BGD       6
 2 PER       6
 3 EGY       5
 4 GHA       5
 5 MWI       5
 6 NGA       5
 7 KHM       4
 8 NPL       4
 9 RWA       4
10 SEN       4
# ... with 90 more rows</code></pre>
<pre class="r"><code>health_data %&gt;% 
  distinct(iso3)</code></pre>
<pre><code># A tibble: 100 x 1
   iso3 
   &lt;chr&gt;
 1 AFG  
 2 ALB  
 3 ARG  
 4 ARM  
 5 AZE  
 6 BGD  
 7 BRB  
 8 BLR  
 9 BLZ  
10 BEN  
# ... with 90 more rows</code></pre>
<pre class="r"><code># What is the difference between the minimum and maximum year 
# with valid data for each country?
health_data %&gt;% 
  arrange(iso3, year) %&gt;% 
  group_by(iso3) %&gt;% 
  summarise(n = n(),
            min_yr = min(year),
            max_yr = max(year),
            diff = max_yr - min_yr)</code></pre>
<pre><code># A tibble: 100 x 5
   iso3      n min_yr max_yr  diff
   &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 AFG       1   2010   2010     0
 2 ALB       2   2005   2008     3
 3 ARG       1   2012   2012     0
 4 ARM       3   2000   2010    10
 5 AZE       1   2006   2006     0
 6 BDI       2   2005   2010     5
 7 BEN       3   2001   2011    10
 8 BFA       3   2003   2010     7
 9 BGD       6   2004   2014    10
10 BIH       2   2006   2011     5
# ... with 90 more rows</code></pre>
<pre class="r"><code># How many countries reported data in 3 or more years?
health_data %&gt;% 
  count(iso3, sort = TRUE) %&gt;% 
  filter(n &gt;= 3)</code></pre>
<pre><code># A tibble: 34 x 2
   iso3      n
   &lt;chr&gt; &lt;int&gt;
 1 BGD       6
 2 PER       6
 3 EGY       5
 4 GHA       5
 5 MWI       5
 6 NGA       5
 7 KHM       4
 8 NPL       4
 9 RWA       4
10 SEN       4
# ... with 24 more rows</code></pre>
<pre class="r"><code># Which countries reported 100% incidence for at least one year in either age group?
health_data %&gt;% 
  filter(`age 15-17` &gt;= 100 |
         `age 20-34` &gt;= 100) %&gt;% 
  count(iso3, sort = TRUE)</code></pre>
<pre><code># A tibble: 18 x 2
   iso3      n
   &lt;chr&gt; &lt;int&gt;
 1 ARM       2
 2 BIH       2
 3 BLR       2
 4 CUB       2
 5 KAZ       2
 6 MDA       2
 7 MNE       2
 8 UKR       2
 9 ARG       1
10 BRB       1
11 DOM       1
12 JAM       1
13 KGZ       1
14 LCA       1
15 MKD       1
16 SRB       1
17 THA       1
18 URY       1</code></pre>
<pre class="r"><code>health_data %&gt;% 
  filter(iso3 %in% c(&quot;ARM&quot;, &quot;BLR&quot;, &quot;KAZ&quot;))</code></pre>
<pre><code># A tibble: 7 x 4
  iso3   year `age 15-17` `age 20-34`
  &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
1 ARM    2000          93          87
2 ARM    2005          99         100
3 ARM    2010         100         100
4 BLR    2005         100         100
5 BLR    2012         100         100
6 KAZ    2006         100         100
7 KAZ    2010         100         100</code></pre>
</div>
<div id="question-2" class="section level2">
<h2>Question 2</h2>
<p>A student has sent you the file rmd-country-profile.Rmd, which is an R Markdown document analyzing the data in at_health_facilities.csv for Bangladesh. They could not knit the file, and are providing you with the raw .Rmd file instead of a rendered file.</p>
<p>Go through the file, fixing things that are preventing it from knitting cleanly. Change the two lines of bold text to H2-level headers to organize the document, and add a table of contents. Convert this R Markdown report for Bangladesh into a parameterized report with the country’s iso3 code as its parameter. Knit a new country profile for Egypt (ISO3 code “EGY”).</p>
<!-- rmarkdown::render(here::here("analysis/rmd-country-profile.Rmd"), -->
<!-- params = list(iso3 = "EGY")) -->
</div>
<div id="question-3" class="section level2">
<h2>Question 3</h2>
<p>You have been given a CSV file infant_hiv.csv that is formatted as follows:</p>
<p>ISO3 2009 est 2009 hi 2009 lo 2010 est 2010 hi 2010 lo ALB - - - - - - BLR &gt;95% &gt;95% &gt;95% &gt;95% &gt;95% &gt;95% BLZ 77% 89% 3% 75% 88% 3% BRA 25% 35% 19% 25% 35% 19% The first column is ISO3 country codes. There are three columns for each year from 2009 to 2017. Each set has estimated, low, and high values for the year (in that order). A dash - indicates that no data is available. Our analyst tells us that &gt;95% means “the data is unreliable”. Your task is to turn this into a tidy data table for further analysis:</p>
<p>Describe what columns a tidy layout for this data would have and why. Write a function that takes the name of a file containing this table as input and returns a tidy version of the table. The function should replace all - and &gt;95% values with NA. The body of the function may contain one or more pipelines and may create temporary or intermediate variables, but may not contain any loops. iso3 year metric value afg 2009 hi NA</p>
<pre class="r"><code>tidy_df &lt;- function(filepath){
  infant_hiv &lt;- read_csv(filepath,
                       na = c(&quot;&quot;, &quot;NA&quot;, &quot;-&quot;, &quot;&gt;95%&quot;))
  infant_hiv %&gt;% 
    pivot_longer(cols = -ISO3,
                 names_to = &quot;key&quot;,
                 values_to = &quot;value&quot;) %&gt;% 
    separate(key, c(&quot;year&quot;, &quot;metric&quot;), sep = &quot; &quot;)
}

tidy_data &lt;- tidy_df(&quot;./data/infant_hiv.csv&quot;)
glimpse(tidy_data)</code></pre>
<pre><code>Rows: 5,184
Columns: 4
$ ISO3   &lt;chr&gt; &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG&quot;, &quot;AFG...
$ year   &lt;chr&gt; &quot;2009&quot;, &quot;2009&quot;, &quot;2009&quot;, &quot;2010&quot;, &quot;2010&quot;, &quot;2010&quot;, &quot;2011&quot;, &quot;201...
$ metric &lt;chr&gt; &quot;est&quot;, &quot;hi&quot;, &quot;lo&quot;, &quot;est&quot;, &quot;hi&quot;, &quot;lo&quot;, &quot;est&quot;, &quot;hi&quot;, &quot;lo&quot;, &quot;es...
$ value  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...</code></pre>
</div>
<div id="question-4" class="section level2">
<h2>Question 4</h2>
<p>The file ranking.csv contains two columns:</p>
<ul>
<li>The ID of an item being rated.</li>
<li>A rating, which is one of “negative”, “positive”, “indifferent”, or “wtf” (meaning the respondent didn’t understand the question).</li>
</ul>
<p>There are multiple ratings for each item.</p>
<p>The plot below shows this data:</p>
<ul>
<li>Each dot represents one item i.</li>
<li>The size of the circles shows the total number of ratings for item i.</li>
<li>The X coordinate for item i is the percentage of ratings for that item that are “negative”.</li>
<li>The Y coordinate for item i is the percentage of ratings for that item that are “positive”.</li>
<li>The regression line is created using the ‘lm’ method.</li>
</ul>
<pre class="r"><code>rankings &lt;- read_csv(&quot;./data/ranking.csv&quot;)
glimpse(rankings)</code></pre>
<pre><code>Rows: 6,460
Columns: 2
$ item &lt;dbl&gt; 192, 171, 191, 182, 41, 112, 60, 99, 168, 80, 322, 106, 104, 1...
$ rank &lt;chr&gt; &quot;positive&quot;, &quot;negative&quot;, &quot;positive&quot;, &quot;positive&quot;, &quot;positive&quot;, &quot;p...</code></pre>
<pre class="r"><code>rankings %&gt;% 
  count(rank, sort = TRUE)</code></pre>
<pre><code># A tibble: 4 x 2
  rank            n
  &lt;chr&gt;       &lt;int&gt;
1 positive     3865
2 indifferent  1431
3 negative      985
4 wtf           179</code></pre>
<pre class="r"><code>rankings %&gt;% 
  count(item, sort = TRUE)</code></pre>
<pre><code># A tibble: 284 x 2
    item     n
   &lt;dbl&gt; &lt;int&gt;
 1    80    33
 2   217    33
 3    18    32
 4    81    31
 5   107    31
 6   136    31
 7   148    31
 8    12    30
 9    15    30
10    19    30
# ... with 274 more rows</code></pre>
<pre class="r"><code>rankings %&gt;% 
  group_by(item) %&gt;% 
  summarise(n = n(),
         prop_neg = sum(rank == &quot;negative&quot;)/n,
         prop_pos = sum(rank == &quot;positive&quot;)/n,
         prop_indiff = sum(rank == &quot;indifferent&quot;)/n,
         prop_wtf = sum(rank == &quot;wtf&quot;)/n,
         tot = prop_neg + prop_pos + prop_indiff + prop_wtf) %&gt;% 
  ggplot(aes(prop_neg, prop_pos, size = n)) +
  geom_point(aes(alpha = 0.25)) +
  geom_smooth(method = &quot;lm&quot;) +
  labs(x = &quot;negative&quot;,
       y = &quot;positive&quot;)</code></pre>
<p><img src="figure/sample_exam1.Rmd/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="sample-exam-2" class="section level1">
<h1>Sample exam 2</h1>
<div id="basic-operations" class="section level2">
<h2>Basic Operations</h2>
<p>Read the file person.csv and store the result in a tibble called person.</p>
<p>Create a tibble containing only family and personal names, in that order. You do not need to assign this tibble or any others to variables unless explicitly asked to do so. However, as noted in the introduction, you must use the pipe operator %&gt;% and code that follows the tidyverse style guide.</p>
<p>Create a new tibble containing only the rows in which family names come before the letter M. Your solution should work for tables with more rows than the example, i.e., you cannot rely on row numbers or select specific names.</p>
<p>Display all the rows in person sorted by family name length with the longest name first</p>
<pre class="r"><code>person &lt;- read_csv(&quot;./data/person.csv&quot;)

person %&gt;%
  select(family_name, personal_name)</code></pre>
<pre><code># A tibble: 5 x 2
  family_name personal_name
  &lt;chr&gt;       &lt;chr&gt;        
1 Dyer        William      
2 Pabodie     Frank        
3 Lake        Anderson     
4 Roerich     Valentina    
5 Danforth    Frank        </code></pre>
<pre class="r"><code>person %&gt;% 
  filter(family_name &lt; &quot;M&quot;)</code></pre>
<pre><code># A tibble: 3 x 3
  person_id personal_name family_name
  &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;      
1 dyer      William       Dyer       
2 lake      Anderson      Lake       
3 danforth  Frank         Danforth   </code></pre>
<pre class="r"><code>person %&gt;% 
  mutate(len_name = str_length(family_name)) %&gt;% 
  arrange(desc(len_name)) %&gt;% 
  select(person_id:family_name)</code></pre>
<pre><code># A tibble: 5 x 3
  person_id personal_name family_name
  &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;      
1 danforth  Frank         Danforth   
2 pb        Frank         Pabodie    
3 roe       Valentina     Roerich    
4 dyer      William       Dyer       
5 lake      Anderson      Lake       </code></pre>
</div>
<div id="cleaning-and-counting" class="section level2">
<h2>Cleaning and Counting</h2>
<p>Read the file measurements.csv to create a tibble called measurements. (The strings “rad”, “sal”, and “temp” in the quantity column stand for “radiation”, “salinity”, and “temperature” respectively.)</p>
<p>Create a tibble containing only rows where none of the values are NA and save in a tibble called cleaned.</p>
<p>Count the number of measurements of each type of quantity in cleaned. Your result should have one row for each quantity “rad”, “sal”, and “temp”.</p>
<p>Display the minimum and maximum value of reading separately for each quantity in cleaned. Your result should have one row for each quantity “rad”, “sal”, and “temp”.</p>
<p>Create a tibble in which all salinity (“sal”) readings greater than 1 are divided by 100. (This is needed because some people wrote percentages as numbers from 0.0 to 1.0, but others wrote them as 0.0 to 100.0.)</p>
<pre class="r"><code>measurements &lt;- read_csv(&quot;./data/measurements.csv&quot;)
glimpse(measurements)</code></pre>
<pre><code>Rows: 21
Columns: 4
$ visit_id &lt;dbl&gt; 619, 619, 622, 622, 734, 734, 734, 735, 735, 735, 751, 751...
$ visitor  &lt;chr&gt; &quot;dyer&quot;, &quot;dyer&quot;, &quot;dyer&quot;, &quot;dyer&quot;, &quot;pb&quot;, &quot;lake&quot;, &quot;pb&quot;, &quot;pb&quot;, ...
$ quantity &lt;chr&gt; &quot;rad&quot;, &quot;sal&quot;, &quot;rad&quot;, &quot;sal&quot;, &quot;rad&quot;, &quot;sal&quot;, &quot;temp&quot;, &quot;rad&quot;, &quot;...
$ reading  &lt;dbl&gt; 9.82, 0.13, 7.80, 0.09, 8.41, 0.05, -21.50, 7.22, 0.06, -2...</code></pre>
<pre class="r"><code>cleaned &lt;- measurements %&gt;% 
  drop_na()

cleaned %&gt;% 
  count(quantity)</code></pre>
<pre><code># A tibble: 3 x 2
  quantity     n
  &lt;chr&gt;    &lt;int&gt;
1 rad          8
2 sal          7
3 temp         3</code></pre>
<pre class="r"><code>cleaned %&gt;% 
  group_by(quantity) %&gt;% 
  summarise(min_reading = min(reading),
            max_reading = max(reading))</code></pre>
<pre><code># A tibble: 3 x 3
  quantity min_reading max_reading
  &lt;chr&gt;          &lt;dbl&gt;       &lt;dbl&gt;
1 rad             1.46        11.2
2 sal             0.05        41.6
3 temp          -21.5        -16  </code></pre>
<pre class="r"><code>cleaned %&gt;% 
  mutate(reading = ifelse((quantity == &quot;sal&quot; &amp; reading &gt; 1), 
                          reading / 100, 
                          reading))</code></pre>
<pre><code># A tibble: 18 x 4
   visit_id visitor quantity reading
      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt;
 1      619 dyer    rad        9.82 
 2      619 dyer    sal        0.13 
 3      622 dyer    rad        7.8  
 4      622 dyer    sal        0.09 
 5      734 pb      rad        8.41 
 6      734 lake    sal        0.05 
 7      734 pb      temp     -21.5  
 8      735 pb      rad        7.22 
 9      751 pb      rad        4.35 
10      751 pb      temp     -18.5  
11      752 lake    rad        2.19 
12      752 lake    sal        0.09 
13      752 lake    temp     -16    
14      752 roe     sal        0.416
15      837 lake    rad        1.46 
16      837 lake    sal        0.21 
17      837 roe     sal        0.225
18      844 roe     rad       11.2  </code></pre>
</div>
<div id="combining-data" class="section level2">
<h2>Combining Data</h2>
<p>Read visited.csv and drop rows containing any NAs, assigning the result to a new tibble called visited.</p>
<p>Use an inner join to combine visited with cleaned using the visit_id column for matches.</p>
<p>Find the highest radiation (“rad”) reading at each site. (Sites are identified by values in the site_id column.)</p>
<p>Find the date of the highest radiation reading at each site.</p>
<pre class="r"><code>visited &lt;- read_csv(&quot;./data/visited.csv&quot;)
visited &lt;- visited %&gt;% 
  drop_na()

(combined_tbl &lt;- visited %&gt;% 
  inner_join(cleaned, by = c(&quot;visit_id&quot; = &quot;visit_id&quot;)))</code></pre>
<pre><code># A tibble: 14 x 6
   visit_id site_id visit_date visitor quantity reading
      &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt;
 1      619 DR-1    1927-02-08 dyer    rad         9.82
 2      619 DR-1    1927-02-08 dyer    sal         0.13
 3      622 DR-1    1927-02-10 dyer    rad         7.8 
 4      622 DR-1    1927-02-10 dyer    sal         0.09
 5      734 DR-3    1930-01-07 pb      rad         8.41
 6      734 DR-3    1930-01-07 lake    sal         0.05
 7      734 DR-3    1930-01-07 pb      temp      -21.5 
 8      735 DR-3    1930-01-12 pb      rad         7.22
 9      751 DR-3    1930-02-26 pb      rad         4.35
10      751 DR-3    1930-02-26 pb      temp      -18.5 
11      837 MSK-4   1932-01-14 lake    rad         1.46
12      837 MSK-4   1932-01-14 lake    sal         0.21
13      837 MSK-4   1932-01-14 roe     sal        22.5 
14      844 DR-1    1932-03-22 roe     rad        11.2 </code></pre>
<pre class="r"><code>max_rad &lt;- combined_tbl %&gt;% 
  filter(quantity == &quot;rad&quot;) %&gt;% 
  group_by(site_id) %&gt;% 
  summarise(max_rad = max(reading))

max_rad %&gt;% 
  inner_join(combined_tbl) %&gt;% 
  filter(quantity == &quot;rad&quot;,
         reading == max_rad) %&gt;% 
  select(site_id, visit_date, reading)</code></pre>
<pre><code># A tibble: 3 x 3
  site_id visit_date reading
  &lt;chr&gt;   &lt;date&gt;       &lt;dbl&gt;
1 DR-1    1932-03-22   11.2 
2 DR-3    1930-01-07    8.41
3 MSK-4   1932-01-14    1.46</code></pre>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 3.6.3 (2020-02-29)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19042)

Matrix products: default

locale:
[1] LC_COLLATE=English_South Africa.1252  LC_CTYPE=English_South Africa.1252   
[3] LC_MONETARY=English_South Africa.1252 LC_NUMERIC=C                         
[5] LC_TIME=English_South Africa.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] janitor_2.0.1              magrittr_1.5              
 [3] tidyquant_1.0.0            quantmod_0.4.17           
 [5] TTR_0.23-6                 PerformanceAnalytics_2.0.4
 [7] xts_0.12-0                 zoo_1.8-7                 
 [9] lubridate_1.7.9            emo_0.0.0.9000            
[11] skimr_2.1.1                gt_0.2.2                  
[13] flair_0.0.2                forcats_0.5.0             
[15] stringr_1.4.0              dplyr_1.0.2               
[17] purrr_0.3.4                readr_1.4.0               
[19] tidyr_1.1.2                tibble_3.0.3              
[21] ggplot2_3.3.2              tidyverse_1.3.0           
[23] workflowr_1.6.2           

loaded via a namespace (and not attached):
 [1] httr_1.4.2       splines_3.6.3    jsonlite_1.7.1   modelr_0.1.8    
 [5] assertthat_0.2.1 highr_0.8        cellranger_1.1.0 yaml_2.2.1      
 [9] pillar_1.4.6     backports_1.1.6  lattice_0.20-38  glue_1.4.2      
[13] quadprog_1.5-8   digest_0.6.27    promises_1.1.0   rvest_0.3.6     
[17] snakecase_0.11.0 colorspace_1.4-1 Matrix_1.2-18    htmltools_0.5.0 
[21] httpuv_1.5.2     pkgconfig_2.0.3  broom_0.7.2      haven_2.3.1     
[25] scales_1.1.0     whisker_0.4      later_1.0.0      git2r_0.26.1    
[29] mgcv_1.8-31      farver_2.0.3     generics_0.0.2   ellipsis_0.3.1  
[33] withr_2.2.0      repr_1.1.0       cli_2.1.0        crayon_1.3.4    
[37] readxl_1.3.1     evaluate_0.14    ps_1.3.2         fs_1.5.0        
[41] fansi_0.4.1      nlme_3.1-144     xml2_1.3.2       tools_3.6.3     
[45] hms_0.5.3        lifecycle_0.2.0  munsell_0.5.0    reprex_0.3.0    
[49] compiler_3.6.3   rlang_0.4.8      grid_3.6.3       rstudioapi_0.11 
[53] labeling_0.3     base64enc_0.1-3  rmarkdown_2.4    gtable_0.3.0    
[57] DBI_1.1.0        curl_4.3         R6_2.4.1         knitr_1.28      
[61] utf8_1.1.4       rprojroot_1.3-2  Quandl_2.10.0    stringi_1.5.3   
[65] Rcpp_1.0.4.6     vctrs_0.3.2      dbplyr_2.0.0     tidyselect_1.1.0
[69] xfun_0.13       </code></pre>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
