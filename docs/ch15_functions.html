<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Vebash Naidoo" />

<meta name="date" content="2020-06-11" />

<title>Chapter 15 - Functions</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/master/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R4DS Book - Prep for exam</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Chapter 15 - Functions</h1>
<h4 class="author">Vebash Naidoo</h4>
<h4 class="date">06/11/2020</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span> workflowr <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> </a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2020-11-21
</p>
<p>
<strong>Checks:</strong> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7 <span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>r4ds_book/</code> <span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed."> </span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a> analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version 1.6.2). The <em>Checks</em> tab describes the reproducibility checks that were applied when the results were created. The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date </a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20200814code"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Seed:</strong> <code>set.seed(20200814)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20200814code" class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20200814)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Session information:</strong> recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be confident that you successfully produced the results during this run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomsciencificityR4DSstudyexamstree6e7b3db6d0e7fa527d843407cafe965d5f7acd67targetblank6e7b3dba"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Repository version:</strong> <a href="https://github.com/sciencificity/R4DS_study_exams/tree/6e7b3db6d0e7fa527d843407cafe965d5f7acd67" target="_blank">6e7b3db</a> </a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcomsciencificityR4DSstudyexamstree6e7b3db6d0e7fa527d843407cafe965d5f7acd67targetblank6e7b3dba" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility.
</p>
<p>
The results in this page were generated with repository version <a href="https://github.com/sciencificity/R4DS_study_exams/tree/6e7b3db6d0e7fa527d843407cafe965d5f7acd67" target="_blank">6e7b3db</a>. See the <em>Past versions</em> tab to see a history of the changes made to the R Markdown and HTML files.
</p>
<p>
Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .Rproj.user/

Untracked files:
    Untracked:  analysis/images/
    Untracked:  code_snipp.txt
    Untracked:  data/at_health_facilities.csv
    Untracked:  data/infant_hiv.csv
    Untracked:  data/measurements.csv
    Untracked:  data/person.csv
    Untracked:  data/ranking.csv
    Untracked:  data/visited.csv

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the repository in which changes were made to the R Markdown (<code>analysis/ch15_functions.Rmd</code>) and HTML (<code>docs/ch15_functions.html</code>) files. If you’ve configured a remote Git repository (see <code>?wflow_git_remote</code>), click on the hyperlinks in the table below to view the files as they were in that past version.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/7ed0458900c1f46198c63e4abf18223bec6e4a2f/docs/ch15_functions.html" target="_blank">7ed0458</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-10
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/86457fa9c658cdc29f07e57c5b965859ac6c9814/docs/ch15_functions.html" target="_blank">86457fa</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-10
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/4879249efdfb1b6acb1c0ed5d85a58fac5eeb0c2/docs/ch15_functions.html" target="_blank">4879249</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-09
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/e4239674be77d3b6d016e78863ae5cf23c93a07b/docs/ch15_functions.html" target="_blank">e423967</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-08
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/0d223fb536f932b6f5957f0eb33982ea0a73d3db/docs/ch15_functions.html" target="_blank">0d223fb</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-08
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/sciencificity/R4DS_study_exams/blob/b67f0a772355dbf4d20909761be4300904e84662/analysis/ch15_functions.Rmd" target="_blank">b67f0a7</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-08
</td>
<td>
added ch13
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sciencificity/R4DS_study_exams/ecd1d8ed8bb055d0acaf502bb58ca1845a946c31/docs/ch15_functions.html" target="_blank">ecd1d8e</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-07
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
Rmd
</td>
<td>
<a href="https://github.com/sciencificity/R4DS_study_exams/blob/9440e66d5344a6f84768caf6333a1bb8e3a83232/analysis/ch15_functions.Rmd" target="_blank">9440e66</a>
</td>
<td>
sciencificity
</td>
<td>
2020-11-07
</td>
<td>
finished ch15
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<div id="functions" class="section level1">
<h1>Functions</h1>
<pre><code class='language-r'><code>df <- tibble::tibble(<br>&nbsp;&nbsp;a = rnorm(10),<br>&nbsp;&nbsp;b = rnorm(10),<br>&nbsp;&nbsp;c = rnorm(10),<br>&nbsp;&nbsp;d = rnorm(10)<br>)<br>df$a <- (df$a - min(df$a, na.rm = TRUE)) / <br>&nbsp;&nbsp;(max(df$a, na.rm = TRUE) - min(df$a, na.rm = TRUE))<br>df$b <- (df$b - min(df$b, na.rm = TRUE)) / <br>&nbsp;&nbsp;(<span style='background-color:#E3242B;color:#FFE4E1'>max(df$b, na.rm = TRUE) - min(df$a, na.rm = TRUE)</span>)<br>df$c <- (df$c - min(df$c, na.rm = TRUE)) / <br>&nbsp;&nbsp;(max(df$c, na.rm = TRUE) - min(df$c, na.rm = TRUE))<br>df$d <- (df$d - min(df$d, na.rm = TRUE)) / <br>&nbsp;&nbsp;(max(df$d, na.rm = TRUE) - min(df$d, na.rm = TRUE))</code></code></pre>
<p>Note the mistake in the copy and paste - we’re using <code>df$a</code> for the calculation for <code>df$b</code>!</p>
<p>Let’s isolate the main functionality that we are <strong>repeating</strong>.</p>
<pre class="r"><code>(df$a - min(df$a, na.rm = TRUE)) / 
  (max(df$a, na.rm = TRUE) - min(df$a, na.rm = TRUE))
#&gt;  [1] 0.5358203 0.0000000 0.5941388 0.5494290 1.0000000 0.3947922 0.5101009
#&gt;  [8] 0.6675033 0.6034676 0.3683384</code></pre>
<p>That’s all good and well, but to write a function you should generalise the functionality as a test first.</p>
<pre class="r"><code>x &lt;- df$a

(x - min(x, na.rm = TRUE)) /
  (max(x, na.rm = TRUE) - min(x, na.rm = TRUE))
#&gt;  [1] 0.5358203 0.0000000 0.5941388 0.5494290 1.0000000 0.3947922 0.5101009
#&gt;  [8] 0.6675033 0.6034676 0.3683384</code></pre>
<p>Even better, we’re using the <code>range</code> when we use <code>max</code> and <code>min</code>. So let’s re-write using that.</p>
<pre class="r"><code>rng &lt;- range(x, na.rm=TRUE)
(x - rng[1]) /
  (rng[2] - rng[1])
#&gt;  [1] 0.5358203 0.0000000 0.5941388 0.5494290 1.0000000 0.3947922 0.5101009
#&gt;  [8] 0.6675033 0.6034676 0.3683384</code></pre>
<p>Let’s pull it all together in a <span style="color: #008080;background-color:#9FDDBA">function</span>.</p>
<pre><code class='language-r'><code>rescale01 <- <span style='background-color:#9FDDBA;color:#008080'>function</span>(x) <span style='background-color:#cfdad4;color:#6d6875'>{</span><br>&nbsp;&nbsp;# rescales a vector to lie between 0 and 1<br>&nbsp;&nbsp;rng <- range(x, na.rm = TRUE)<br>&nbsp;&nbsp;(x - rng[1]) /(rng[2] - rng[1])<br><span style='background-color:#cfdad4;color:#6d6875'>}</span><br><br>rescale01(c(0,5,10))<br>#> [1] 0.0 0.5 1.0</code></code></pre>
<p>Key steps:</p>
<ol style="list-style-type: decimal">
<li><p>Pick a <span style="color: #008080;background-color:#9FDDBA"><strong>name</strong></span> for the function.</p></li>
<li><p>List the inputs, or <strong>arguments</strong>, to the function inside <span style="color: #008080;background-color:#9FDDBA"><code>function</code></span>. Example: <span style="color: #008080;background-color:#9FDDBA"><code>function(x, y, z)</code></span> .</p></li>
<li><p>Place your code in <strong>body</strong> of the function, a <span style="color: #008080;background-color:#9FDDBA"><code>{</code></span> block that immediately follows <code>function(...)</code>.</p></li>
<li><p>Make it work with a small input.</p></li>
<li><p>Check the function with a range of inputs.</p></li>
</ol>
<pre class="r"><code>rescale01(c(-10,0,10))
#&gt; [1] 0.0 0.5 1.0

rescale01(c(1,2,3,NA,5))
#&gt; [1] 0.00 0.25 0.50   NA 1.00</code></pre>
<p>Simplifying the original calcs:</p>
<pre class="r"><code>df$a &lt;- rescale01(df$a)
df$b &lt;- rescale01(df$b)
df$c &lt;- rescale01(df$c)
df$d &lt;- rescale01(df$d)</code></pre>
<p>Now changes can be made in a single place.</p>
<pre class="r"><code>x &lt;- c(1:10, Inf)
rescale01(x)
#&gt;  [1]   0   0   0   0   0   0   0   0   0   0 NaN</code></pre>
<pre class="r"><code>rescale01 &lt;- function(x){
  rng &lt;- range(x, na.rm = TRUE, finite = TRUE)
  (x - rng[1]) /(rng[2] - rng[1])
}

rescale01(x)
#&gt;  [1] 0.0000000 0.1111111 0.2222222 0.3333333 0.4444444 0.5555556 0.6666667
#&gt;  [8] 0.7777778 0.8888889 1.0000000       Inf</code></pre>
<div id="intro---exercises" class="section level3">
<h3>Intro - Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Why is <code>TRUE</code> not a parameter to <code>rescale01()</code>? What would happen if <code>x</code> contained a single missing value, and <code>na.rm</code> was <code>FALSE</code>?</p>
<pre class="r"><code>rescale01_miss &lt;- function(x){
  rng &lt;- range(x, na.rm = FALSE)
  (x - rng[1]) / (rng[2] - rng[1])
}
rescale01_miss(c(1:5, NA, 10))
#&gt; [1] NA NA NA NA NA NA NA

rescale01_miss &lt;- function(x){
  rng &lt;- range(x, na.rm = FALSE, finite = TRUE)
  (x - rng[1]) / (rng[2] - rng[1])
}
rescale01_miss(c(1:5, NA, 10))
#&gt; [1] 0.0000000 0.1111111 0.2222222 0.3333333 0.4444444        NA 1.0000000</code></pre>
<p>If any value is NA the range function returns NA as min and max of range. If <code>finite = TRUE</code> is set only the NA value returns NA.</p>
<p>According to the help page: “If finite is TRUE, the minimum and maximum of all finite values is computed, i.e., <code>finite = TRUE</code> includes <code>na.rm = TRUE</code>.”</p></li>
<li><p>In the second variant of <code>rescale01()</code>, infinite values are left unchanged. Rewrite <code>rescale01()</code> so that <code>-Inf</code> is mapped to 0, and <code>Inf</code> is mapped to 1.</p>
<pre class="r"><code>rescale01_inf &lt;- function(x){
  rng &lt;- range(x, na.rm = TRUE, finite = TRUE)
  x[x == -Inf] &lt;- 0
  x[x == Inf] &lt;- 1
  (x - rng[1]) / (rng[2] - rng[1])
}

rescale01_inf(c(1, Inf, 0, -Inf))
#&gt; [1] 1 1 0 0</code></pre></li>
<li><p>Practice turning the following code snippets into functions. Think about what each function does. What would you call it? How many arguments does it need? Can you rewrite it to be more expressive or less duplicative?</p>
<pre class="r"><code>mean(is.na(x))

x / sum(x, na.rm = TRUE)

sd(x, na.rm = TRUE) / mean(x, na.rm = TRUE)</code></pre>
<p><code>mean(is.na(x))</code> finds what percentage of the data is NA.</p>
<pre class="r"><code>x &lt;- c(NA, 1:10, NA, 5)
mean(is.na(x))
#&gt; [1] 0.1538462

mean_na &lt;- function(x){
  sum(x)/length(x)
}
mean_na(is.na(x))
#&gt; [1] 0.1538462</code></pre>
<p><code>x / sum(x, na.rm = TRUE)</code> converts each x to a percentage it contributes towards 100%, not considering the NAs.</p>
<pre class="r"><code>contrib_to_one &lt;- function(x) {
  x / sum(x, na.rm = TRUE)
}

contrib_to_one(x)
#&gt;  [1]         NA 0.01666667 0.03333333 0.05000000 0.06666667 0.08333333
#&gt;  [7] 0.10000000 0.11666667 0.13333333 0.15000000 0.16666667         NA
#&gt; [13] 0.08333333</code></pre>
<p><code>sd(x, na.rm = TRUE) / mean(x, na.rm = TRUE)</code> finds how the deviation as a proportion of the mean. <code>sd</code> means standard deviation and is a measure of the variability in your data. The <code>mean</code> is the average of your data.</p>
<pre class="r"><code>deviation &lt;- function(x, na.rm = TRUE) {
  sd(x, na.rm = na.rm) / mean(x, na.rm = na.rm)
}

deviation(x)
#&gt; [1] 0.5273097</code></pre></li>
<li><p>Write your own functions to compute the variance and skewness of a numeric vector. Variance is defined as <span class="math display">\[
\mathrm{Var}(x) = \frac{1}{n - 1} \sum_{i=1}^n (x_i - \bar{x}) ^2 \text{,}
\]</span> where <span class="math inline">\(\bar{x} = (\sum_i^n x_i) / n\)</span> is the sample mean. Skewness is defined as <span class="math display">\[
\mathrm{Skew}(x) = \frac{\frac{1}{n-2}\left(\sum_{i=1}^n(x_i - \bar x)^3\right)}{\mathrm{Var}(x)^{3/2}} \text{.}
\]</span></p>
<pre class="r"><code>
variance &lt;- function(x){
  # find non na length of vector x
  n &lt;- sum(!is.na(x))
  avg &lt;- mean(x, na.rm = TRUE)
  (1/(n-1))*(sum((x - avg)^2, na.rm=TRUE))
}

x &lt;- c(1:10)
variance(x)
#&gt; [1] 9.166667
var(x, na.rm = TRUE)
#&gt; [1] 9.166667

y &lt;- c(1:5, 1:5)
variance(y)
#&gt; [1] 2.222222
var(y)
#&gt; [1] 2.222222

z &lt;- c(1:10, NA)
variance(z)
#&gt; [1] 9.166667
var(z, na.rm = TRUE)
#&gt; [1] 9.166667</code></pre>
<pre class="r"><code>skew &lt;- function(x){
    n &lt;- sum(!is.na(x))
    avg &lt;- mean(x, na.rm = TRUE) 
    summation &lt;- sum((x - avg)^3, na.rm = TRUE)
    variance_val &lt;- (variance(x))^(3/2)
    ((1/(n-2))*summation)/variance_val
}

a &lt;- c(1:10, 1000)
skew(a)
#&gt; [1] 3.014606</code></pre></li>
<li><p>Write <code>both_na()</code>, a function that takes two vectors of the same length and returns the number of positions that have an <code>NA</code> in both vectors.</p>
<pre class="r"><code>both_na &lt;- function(x, y){
  # find where x is NA - is.na(x) - returns a bunch of TRUE, FALSE
  # find where y is NA - is.na(y) - returns a bunch of TRUE, FALSE
  # where are they both NA - &amp;
  # sum where they are both NA 
  # e.g. (T, F, T) &amp; (T, F, F) == 1; only T in same place once
  sum(is.na(x) &amp; is.na(y))
}

x &lt;- c(1:10, NA, 12, NA)
y &lt;- c(1:9, 10, NA, 12, 13)
both_na(x,y)
#&gt; [1] 1
both_na(c(NA, 2, 4, 6, NA, 10, 12),
        c(NA, 1, 3, 5, NA, 9, 11))
#&gt; [1] 2</code></pre></li>
<li><p>What do the following functions do? Why are they useful even though they are so short?</p>
<ul>
<li><p><code>is_directory()</code> tells you whether a given path is a directory.</p></li>
<li><p><code>is_readable()</code> tells you whether you have permission to read a file.</p>
<pre class="r"><code>is_directory &lt;- function(x) file.info(x)$isdir
is_directory(&quot;C:/Personal&quot;)
#&gt; [1] TRUE
is_directory(&quot;C:/Work/Learning/how-containers-work.pdf&quot;)
#&gt; [1] FALSE
is_readable &lt;- function(x) file.access(x, 4) == 0
is_readable(&quot;C:/Personal&quot;)
#&gt; C:/Personal 
#&gt;        TRUE
is_readable(&quot;C:/Work/Learning/how-containers-work.pdf&quot;)
#&gt; C:/Work/Learning/how-containers-work.pdf 
#&gt;                                     TRUE</code></pre></li>
</ul></li>
<li><p>Read the <a href="https://en.wikipedia.org/wiki/Little_Bunny_Foo_Foo">complete lyrics</a> to “Little Bunny Foo Foo”. There’s a lot of duplication in this song. Extend the initial piping example to recreate the complete song, and use functions to reduce the duplication.</p>
<pre>
Repeat (x3)
Little Bunny Foo Foo,
Hopping through the forest,
Scooping up the field mice,
And bopping them on the head.

(Spoken)
Down came the Good Fairy, and she said,

"Little Bunny Foo Foo,
I don't want to see you,
Scooping up the field mice
And bopping them on the head."

(Spoken)
"I'll give you three (two / one) chance(s),
And if you don't behave,
I'm gonna turn you into a goon!"
END Repeat

The next day... or That evening... or Later that night...
"I gave you three chances,
And you didn't behave,
And now I'm gonna turn you into a goon. POOF!"

"And the moral of the story is: Hare today, goon tomorrow."
</pre>
<pre class="r"><code>little_bunny &lt;- function(bunny = &quot;&quot;){
  str_glue(&quot;{bunny}Little Bunny Foo-Foo,\n\n&quot;)
}

hop &lt;- function(bunny, where = &quot;forest&quot;){
  str_glue(&quot;{bunny}Hopping through the {where},\n\n&quot;)
}

scoop &lt;- function(bunny, what = &quot;field mice&quot;){
  str_glue(&quot;{bunny}Scooping up the {what},\n\n&quot;)
}

bop &lt;- function(bunny, where = &quot;head&quot;){
  str_glue(&quot;{bunny}And bopping them on the {where}.\n\n\n&quot;)
}

chances &lt;- function(bunny, num = &quot;three&quot;){
  if(num == &quot;one&quot;) {
    str_glue(&quot;{bunny}I&#39;ll give you {num} chance,\n\n&quot;)
  }
  else {
    str_glue(&quot;{bunny}I&#39;ll give you {num} chances,\n\n&quot;)
  }
}

static_line1 &lt;- function(bunny){
  str_glue(&quot;{bunny}I don&#39;t want to see you,\n\n&quot;)
}

static_line2 &lt;- function(bunny){
  str_glue(&quot;{bunny}And if you don&#39;t behave,\nI&#39;m gonna turn you into a goon!\n\n\n&quot;)
}

static_line3 &lt;- function(bunny){
  str_glue(&quot;{bunny}Down came the Good Fairy, and she said,\n\n&quot;)
}


foo_foo &lt;- little_bunny()
foo_foo %&gt;% 
  hop(where = &quot;forest&quot;) %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;% 
  static_line3() %&gt;% 
  little_bunny() %&gt;% 
  static_line1() %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;%
  chances(num = &quot;three&quot;) %&gt;% 
  static_line2() %&gt;%
  little_bunny() %&gt;% 
  hop(where = &quot;forest&quot;) %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;% 
  static_line3()%&gt;% 
  little_bunny() %&gt;% 
  static_line1()%&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;%
  chances(num = &quot;two&quot;) %&gt;% 
  static_line2() %&gt;% 
  little_bunny() %&gt;% 
  hop(where = &quot;forest&quot;) %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;% 
  static_line3()%&gt;% 
  little_bunny() %&gt;% 
  static_line1() %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;%
  chances(num = &quot;one&quot;) %&gt;% 
  static_line2() %&gt;%
  little_bunny() %&gt;% 
  hop(where = &quot;forest&quot;) %&gt;% 
  scoop(what = &quot;field mice&quot;) %&gt;% 
  bop(where = &quot;head&quot;) %&gt;% 
  static_line3() %&gt;%   
  str_glue(&quot;I gave you three chances,\nAnd you didn&#39;t behave,\nAnd now I&#39;m gonna turn you into a goon. POOF!&quot;)
#&gt; Little Bunny Foo-Foo,
#&gt; Hopping through the forest,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; Down came the Good Fairy, and she said,
#&gt; Little Bunny Foo-Foo,
#&gt; I don&#39;t want to see you,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; I&#39;ll give you three chances,
#&gt; And if you don&#39;t behave,
#&gt; I&#39;m gonna turn you into a goon!
#&gt; 
#&gt; Little Bunny Foo-Foo,
#&gt; Hopping through the forest,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; Down came the Good Fairy, and she said,
#&gt; Little Bunny Foo-Foo,
#&gt; I don&#39;t want to see you,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; I&#39;ll give you two chances,
#&gt; And if you don&#39;t behave,
#&gt; I&#39;m gonna turn you into a goon!
#&gt; 
#&gt; Little Bunny Foo-Foo,
#&gt; Hopping through the forest,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; Down came the Good Fairy, and she said,
#&gt; Little Bunny Foo-Foo,
#&gt; I don&#39;t want to see you,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; I&#39;ll give you one chance,
#&gt; And if you don&#39;t behave,
#&gt; I&#39;m gonna turn you into a goon!
#&gt; 
#&gt; Little Bunny Foo-Foo,
#&gt; Hopping through the forest,
#&gt; Scooping up the field mice,
#&gt; And bopping them on the head.
#&gt; 
#&gt; Down came the Good Fairy, and she said,
#&gt; I gave you three chances,
#&gt; And you didn&#39;t behave,
#&gt; And now I&#39;m gonna turn you into a goon. POOF!</code></pre></li>
</ol>
</div>
<div id="human-readable-functions---exercises" class="section level3">
<h3>Human Readable Functions - Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Read the source code for each of the following three functions, puzzle out what they do, and then brainstorm better names.</p>
<pre class="r"><code>f1 &lt;- function(string, prefix) {
  substr(string, 1, nchar(prefix)) == prefix
}
f2 &lt;- function(x) {
  if (length(x) &lt;= 1) return(NULL)
  x[-length(x)]
}
f3 &lt;- function(x, y) {
  rep(y, length.out = length(x))
}</code></pre>
<p>The first function <code>f1</code> checks if the substring of string matches the prefix given.</p>
<pre class="r"><code>match_prefix &lt;- function(string, prefix) {
  substr(string, 1, nchar(prefix)) == prefix
}
match_prefix(&quot;===The quick brown fox&quot;, &quot;===&quot;)
#&gt; [1] TRUE
match_prefix(&quot;```The quick brown fox&quot;, &quot;===&quot;)
#&gt; [1] FALSE
match_prefix(c(&quot;the man in the bowler hat&quot;,
               &quot;that quick brown fox&quot;,
               &quot;the one and only&quot;,
               &quot;that crafy ol&#39; fox&quot;),
             &quot;the&quot;)
#&gt; [1]  TRUE FALSE  TRUE FALSE</code></pre>
<p>The function removes the last item of vector x.</p>
<pre class="r"><code>remove_last &lt;- function(x) {
  if (length(x) &lt;= 1) return(NULL)
  x[-length(x)]
}
remove_last(c(1:5, 2, 30, 45, NA))
#&gt; [1]  1  2  3  4  5  2 30 45
remove_last(c(NA, 2, 30, 45, 1:5))
#&gt; [1] NA  2 30 45  1  2  3  4</code></pre>
<p>The function repeats the y vector as many times as the length of vector x.</p>
<pre class="r"><code>rep_len &lt;- function(x, y) {
  rep(y, length.out = length(x))
}
rep_len(c(1:10), 1)
#&gt;  [1] 1 1 1 1 1 1 1 1 1 1
rep_len(c(&quot;a&quot;, &quot;b&quot;, &quot;abc&quot;, &quot;abcd&quot;, &quot;efghi&quot;),
        c(&quot;a&quot;, &quot;b&quot;, &quot;abc&quot;))
#&gt; [1] &quot;a&quot;   &quot;b&quot;   &quot;abc&quot; &quot;a&quot;   &quot;b&quot;</code></pre></li>
<li><p>Take a function that you’ve written recently and spend 5 minutes brainstorming a better name for it and its arguments.</p></li>
<li><p>Compare and contrast <code>rnorm()</code> and <code>MASS::mvrnorm()</code>. How could you make them more consistent?</p>
<table>
<thead>
<tr class="header">
<th align="left">rnorm()</th>
<th align="left">MASS::mvrnorm()</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">univariate normal distribution</td>
<td align="left">multivariate normal distribution</td>
</tr>
<tr class="even">
<td align="left">n, mean, sd</td>
<td align="left">n, mu, Sigma</td>
</tr>
</tbody>
</table>
<p>You could make mean / mu and sd / Sigma consistent by choosing one of these names. I would also make all names lower case so I would change Sigma to sigma.</p></li>
<li><p>Make a case for why <code>norm_r()</code>, <code>norm_d()</code> etc would be better than <code>rnorm()</code>, <code>dnorm()</code>. Make a case for the opposite.</p>
<ul>
<li><p>For <code>norm_r()</code>, <code>norm_d()</code> the fact that you can type <code>norm</code> and the autocomplete will give you a list of all <code>norm_</code> functions is a win.</p></li>
<li><p>For <code>rnorm()</code>, <code>dnorm()</code> I would say it is more natural to say <em>random normal distribution</em> / <em>density normal distribution</em> than “normal random distribution” / “normal density distribution”.</p></li>
</ul></li>
</ol>
</div>
<div id="conditional-execution" class="section level3">
<h3>Conditional execution</h3>
<p>An <code>if</code> statement allows conditional execution of code.</p>
<pre class="r"><code>if (condition) {
  # code executed when condition is TRUE
} else {
  # code executed when condition is FALSE
}</code></pre>
<ul>
<li><p>To get help on <code>if</code> you need to surround it in backticks: <code>?`if`</code>.</p></li>
<li><p>The <code>condition</code> must evaluate to either <code>TRUE</code> or <code>FALSE</code>. You will get a warning / error if it is a vector OR if it’s an <code>NA</code>.</p></li>
<li><p>Use <code>||</code> (<strong>or</strong>) and <code>&amp;&amp;</code> (<strong>and</strong>) to combine multiple logical expressions. These operators are “short-circuiting”</p></li>
<li><p><strong>NEVER</strong> use <code>|</code> or <code>&amp;</code> in an <code>if</code> statement, since these are vectorised operations.</p></li>
<li><p><code>==</code> is also vectorised, which means you may get more than one output!</p>
<ul>
<li>Check length is 1 already.</li>
<li>Collapse with <code>any()</code> or <code>all()</code>.</li>
<li>Use the non-vectorised <code>identical()</code>, <strong>BUT</strong> this is really strict and can result in unexpected output given how computers store numbers etc. Use <code>dplyr::near()</code> for comparisons.</li>
<li>Use <code>is.na()</code> for NA checks.</li>
</ul></li>
</ul>
<pre class="r"><code>if (c(TRUE, FALSE)) {}
#&gt; NULL
if (NA) {}
#&gt; Error in if (NA) {: missing value where TRUE/FALSE needed</code></pre>
<pre class="r"><code>identical(0L, 0)
#&gt; [1] FALSE</code></pre>
<pre class="r"><code>x &lt;- sqrt(2) ^ 2
x
#&gt; [1] 2
x == 2
#&gt; [1] FALSE
x - 2
#&gt; [1] 0.0000000000000004440892</code></pre>
<p>Multiple if statements are also allowed.</p>
<pre class="r"><code>if (this) {
  # do that
} else if (that) {
  # do something else
} else {
  # 
}</code></pre>
<p>Another useful technique is the <code>switch()</code> function for many <code>if ... else</code> constructs.</p>
<pre class="r"><code>perform_calc &lt;- function(x, y, op) {
  switch(op,
    plus = x + y,
    minus = x - y,
    times = x * y,
    divide = x / y,
    stop(&quot;Unknown op!&quot;)
  )
}
perform_calc(c(1,2,3), c(4,5,6), &quot;plus&quot;)
#&gt; [1] 5 7 9
perform_calc(c(1,2,3), c(4,5), &quot;minus&quot;)
#&gt; Warning in x - y: longer object length is not a multiple of shorter object
#&gt; length
#&gt; [1] -3 -3 -1
perform_calc(c(1,2,3), c(4,5,6), &quot;power&quot;)
#&gt; Error in perform_calc(c(1, 2, 3), c(4, 5, 6), &quot;power&quot;): Unknown op!</code></pre>
</div>
<div id="conditions---exercises" class="section level3">
<h3>Conditions - Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What’s the difference between <code>if</code> and <code>ifelse()</code>? Carefully read the help and construct three examples that illustrate the key differences.</p>
<p><code>if</code> tests just one item, so it has to be used in a loop or with <code>any()</code> / <code>all()</code> if you want to ensure all in a vector meet a condition or any meet a condition.</p>
<p><code>ifelse</code> checks each item in the vector.</p>
<p>If you read the help [?<code>ifelse</code>] it says use <code>if</code>/<code>else</code> construct for simple yes/no answers, and use <code>ifelse</code> for over a set of values.</p>
<pre><code class='language-r'><code>x <- c(1:5, 20, 25, 30)<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;if(length(x) > 10){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(length(x))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TRUE<br>&nbsp;&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(length(x))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FALSE<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;#> [1] 8<br>&nbsp;&nbsp;&nbsp;&nbsp;#> [1] FALSE<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;# You can use ifelse but kinda silly to use in this case<br>&nbsp;&nbsp;&nbsp;&nbsp;ifelse(length(x)>10, length(x), "smaller than 10 items in vector")<br>&nbsp;&nbsp;&nbsp;&nbsp;#> [1] "smaller than 10 items in vector"<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;# here is a better use<br>&nbsp;&nbsp;&nbsp;&nbsp;ifelse(x > 5, TRUE, FALSE)<br>&nbsp;&nbsp;&nbsp;&nbsp;#> [1] FALSE FALSE FALSE FALSE FALSE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;# <span style='background-color:#cfdad4;color:#6d6875'>DOES NOT work</span> for if --- notice the warning that only<br>&nbsp;&nbsp;&nbsp;&nbsp;# 1st is used<br>&nbsp;&nbsp;&nbsp;&nbsp;if (x > 5) TRUE else FALSE<br>&nbsp;&nbsp;&nbsp;&nbsp;#> Warning in if (x > 5) TRUE else FALSE: the condition has length > 1 and only the<br>&nbsp;&nbsp;&nbsp;&nbsp;#> first element will be used<br>&nbsp;&nbsp;&nbsp;&nbsp;#> [1] FALSE</code></code></pre></li>
<li><p>Write a greeting function that says “good morning”, “good afternoon”, or “good evening”, depending on the time of day. (Hint: use a time argument that defaults to <code>lubridate::now()</code>. That will make it easier to test your function.)</p>
<pre class="r"><code>greeting &lt;- function(){
  time &lt;- lubridate::now()
  hr &lt;- lubridate::hour(time)
  if(hr &gt;= 0 &amp;&amp; hr &lt; 12){
    &quot;good morning&quot;
  } else if (hr &gt;= 12 &amp;&amp; hr &lt; 18){
    &quot;good afternoon&quot;
  } else {
    &quot;good evening&quot;
  }
}
greeting()
#&gt; [1] &quot;good evening&quot;</code></pre></li>
<li><p>Implement a <code>fizzbuzz</code> function. It takes a single number as input. If the number is divisible by three, it returns “fizz”. If it’s divisible by five it returns “buzz”. If it’s divisible by three and five, it returns “fizzbuzz”. Otherwise, it returns the number. Make sure you first write working code before you create the function.</p>
<pre class="r"><code>fizzbuzz &lt;- function(x){
  if((x %% 3 == 0) &amp;&amp; (x %% 5 == 0)){
    &quot;fizzbuzz&quot;
  } else if (x %% 3 == 0) {
    &quot;fizz&quot;
  } else if (x %% 5 == 0){
    &quot;buzz&quot;
  } else {
    x
  }
}
fizzbuzz(5)
#&gt; [1] &quot;buzz&quot;
fizzbuzz(9)
#&gt; [1] &quot;fizz&quot;
fizzbuzz(30)
#&gt; [1] &quot;fizzbuzz&quot;
fizzbuzz(10)
#&gt; [1] &quot;buzz&quot;</code></pre></li>
<li><p>How could you use <code>cut()</code> to simplify this set of nested if-else statements?</p>
<pre class="r"><code>temp &lt;- 31
if (temp &lt;= 0) {
  &quot;freezing&quot;
} else if (temp &lt;= 10) {
  &quot;cold&quot;
} else if (temp &lt;= 20) {
  &quot;cool&quot;
} else if (temp &lt;= 30) {
  &quot;warm&quot;
} else {
  &quot;hot&quot;
}
#&gt; [1] &quot;hot&quot;

cut(temp, breaks = 10*(-3:10), 
    labels = c(rep(&quot;freezing&quot;, 3),
               &quot;cold&quot;,
               &quot;cool&quot;,
               &quot;warm&quot;,
               rep(&quot;hot&quot;, 7)))
#&gt; [1] hot
#&gt; Levels: freezing cold cool warm hot

table(cut(temp, breaks = 10*(-3:10), 
    labels = c(rep(&quot;freezing&quot;, 3),
               &quot;cold&quot;,
               &quot;cool&quot;,
               &quot;warm&quot;,
               rep(&quot;hot&quot;, 7))))
#&gt; 
#&gt; freezing     cold     cool     warm      hot 
#&gt;        0        0        0        0        1</code></pre>
<p>How would you change the call to <code>cut()</code> if I’d used <code>&lt;</code> instead of <code>&lt;=</code>? What is the other chief advantage of <code>cut()</code> for this problem? (Hint: what happens if you have many values in <code>temp</code>?)</p>
<p>You would use <code>right = FALSE</code>. <code>cut</code> allows vectors of values whereas <code>if else</code> constructs do not.</p>
<p><strong>NOTE</strong>: If you look at <a href="https://jrnold.github.io/r4ds-exercise-solutions/functions.html">jrnold’s solutions</a> you note that he uses <code>-Inf</code> and <code>Inf</code> for the breaks. This is much better than my hacky solution above that contains boundaries at the bottom and top.</p></li>
<li><p>What happens if you use <code>switch()</code> with numeric values?</p>
<p>Read more <a href="https://www.datamentor.io/r-programming/switch-function/">here</a>.</p>
<p><code>switch</code> evaluates the <code>EXPR</code> against the list item number. Below we have 3 and this evaluates to list item == 3, hence 6.</p>
<pre class="r"><code>x &lt;-  3
switch(x, 
  &quot;2&quot;,
  &quot;4&quot;,
  &quot;6&quot;,
  &quot;8&quot;
)
#&gt; [1] &quot;6&quot;</code></pre></li>
<li><p>What does this <code>switch()</code> call do? What happens if <code>x</code> is “e”?</p>
<p>If x is a or b, it returns “ab”; if x is c or d it returns cd. If x is e, no match is found and nothing is returned.</p>
<p>The docs say to have an unnamed value as default after the named values for no match ones. This can be done as per the last way - note the <span style="color: #6d6875;background-color:#cfdad4">test</span>.</p>
<pre class="r"><code>x &lt;-  &quot;c&quot;
switch(x, 
  a = ,
  b = &quot;ab&quot;,
  c = ,
  d = &quot;cd&quot;
)

x &lt;- &quot;e&quot;
switch(x, 
  a = ,
  b = &quot;ab&quot;,
  c = ,
  d = &quot;cd&quot;
)

x &lt;- &quot;e&quot;
switch(x, 
  a = ,
  b = &quot;ab&quot;,
  c = ,
  d = &quot;cd&quot;
  &quot;test&quot;
)</code></pre>
<p>Experiment, then carefully read the documentation.</p></li>
</ol>
<div id="default-arguments" class="section level4">
<h4>Default Arguments</h4>
<p>The <code>data</code> to apply a function to should come first, followed by the arguments. Arguments should have default values as far as possible.</p>
<pre class="r"><code># Compute confidence interval around mean using normal approximation
mean_ci &lt;- function(x, conf = 0.95) {
  se &lt;- sd(x) / sqrt(length(x))
  alpha &lt;- 1 - conf
  mean(x) + se * qnorm(c(alpha / 2, 1 - alpha / 2))
}
x &lt;- runif(100)
mean_ci(x)
#&gt; [1] 0.4505862 0.5586331
mean_ci(x, conf = 0.99)
#&gt; [1] 0.4336108 0.5756085</code></pre>
<pre><code class='language-r'><code># Compute confidence interval around mean using normal approximation<br>mean_ci <- function(x, <span style='background-color:#9FDDBA;color:#008080'>conf = 0.95</span>) {<br>&nbsp;&nbsp;se <- sd(x) / sqrt(length(x))<br>&nbsp;&nbsp;alpha <- 1 - conf<br>&nbsp;&nbsp;mean(x) + se * qnorm(c(alpha / 2, 1 - alpha / 2))<br>}<br>x <- runif(100)<br>mean_ci(x)<br>#> [1] 0.4187221 0.5271327<br>mean_ci(x, conf = 0.99)<br>#> [1] 0.4016896 0.5441652</code></code></pre>
<p>It’s good practice to check important preconditions, and throw an error (with <code>stop()</code>), if they are not met.</p>
<pre class="r"><code>wt_mean &lt;- function(x, w) {
  if (length(x) != length(w)) {
    stop(&quot;`x` and `w` must be the same length&quot;, call. = FALSE)
  }
  sum(w * x) / sum(w)
}
wt_mean(1:6, 1:3)
#&gt; Error: `x` and `w` must be the same length</code></pre>
<p>A useful function is the built-in <code>stopifnot()</code> which checks that each argument is <code>TRUE</code>, and produces a generic error message if not.</p>
<pre class="r"><code>wt_mean &lt;- function(x, w, na.rm = FALSE) {
  # I want na.rm to be logical: is.logical(na.rm)
  # I want length na.rm to be 1: length(na.rm) == 1
  # If it is NOT that STOP!
  stopifnot(is.logical(na.rm), length(na.rm) == 1)
  stopifnot(length(x) == length(w))
  
  if (na.rm) {
    miss &lt;- is.na(x) | is.na(w)
    x &lt;- x[!miss]
    w &lt;- w[!miss]
  }
  sum(w * x) / sum(w)
}
wt_mean(1:6, 6:1, na.rm = &quot;foo&quot;)
#&gt; Error in wt_mean(1:6, 6:1, na.rm = &quot;foo&quot;): is.logical(na.rm) is not TRUE</code></pre>
<p><strong>NOTE</strong>: When using <code>stopifnot()</code> you assert what should be true rather than checking for what might be wrong.</p>
</div>
<div id="dot-dot-dot" class="section level4">
<h4>Dot-dot-dot (…)</h4>
<p>Many functions in R take an arbitrary number of inputs by using a special argument: <code>...</code> (pronounced dot-dot-dot). You can forward <code>...</code> to other functions.</p>
<pre class="r"><code>sum(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
#&gt; [1] 55
stringr::str_c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;)
#&gt; [1] &quot;abcdef&quot;</code></pre>
<pre class="r"><code>commas &lt;- function(...) stringr::str_c(..., collapse = &quot;, &quot;)
commas(letters[1:10])
#&gt; [1] &quot;a, b, c, d, e, f, g, h, i, j&quot;
rule &lt;- function(..., pad = &quot;-&quot;) {
  title &lt;- paste0(...)
  # getOption(&quot;width&quot;) tells you how many chars can be printed
  # nchar(title) tells you how long title is
  width &lt;- getOption(&quot;width&quot;) - nchar(title) - 5
  cat(title, &quot; &quot;, stringr::str_dup(pad, width), &quot;\n&quot;, sep = &quot;&quot;)
}
rule(&quot;Important output&quot;)
#&gt; Important output -----------------------------------------------------------</code></pre>
<pre><code class='language-r'><code>x <- c(1, 2)<br>sum(x, <span style='background-color:#ffa578;color:#FFE4E1'>na.mr</span> = TRUE)<br>#> [1] 4</code></code></pre>
<p>Notice the result above is incorrect as well, since it sums <code>1 + 2 + TRUE</code> = 4, but it should be 3!</p>
</div>
</div>
<div id="func-arguments---exercises" class="section level3">
<h3>Func Arguments - Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What does <code>commas(letters, collapse = "-")</code> do? Why?</p>
<p>It throws an error. The reason is that both <code>letters</code> and <code>collapse</code> are passed into commas in the <code>...</code> argument.</p>
<pre class="r"><code>commas(letters, collapse = &quot;-&quot;)
#&gt; Error in stringr::str_c(..., collapse = &quot;, &quot;): formal argument &quot;collapse&quot; matched by multiple actual arguments</code></pre></li>
<li><p>It’d be nice if you could supply multiple characters to the <code>pad</code> argument, e.g. <code>rule("Title", pad = "-+")</code>. Why doesn’t this currently work? How could you fix it?</p>
<pre class="r"><code>rule &lt;- function(..., pad = &quot;-&quot;) {
  title &lt;- paste0(...)
  # getOption(&quot;width&quot;) tells you how many chars can be printed
  # nchar(title) tells you how long title is
  width &lt;- getOption(&quot;width&quot;) - nchar(title) - 5
  cat(title, &quot; &quot;, stringr::str_dup(pad, width), &quot;\n&quot;, sep = &quot;&quot;)
}
rule(&quot;Important output&quot;, pad = &quot;-+&quot;)
#&gt; Important output -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</code></pre>
<p>The width of the resulting string is too long this way.</p>
<pre><code class='language-r'><code>rule <- function(..., pad = "-") {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title <- paste0(...)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# getOption("width") tells you how many chars can be printed<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# nchar(title) tells you how long title is<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width <- getOption("width") - nchar(title) - 5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat(title, " ", stringr::str_dup(pad, width/<span style='background-color:#9FDDBA;color:#008080'>nchar(pad)</span>), "\n", sep = "")<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;rule("Important output", pad = "-+")<br>&nbsp;&nbsp;&nbsp;&nbsp;#> Important output -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</code></code></pre></li>
<li><p>What does the <code>trim</code> argument to <code>mean()</code> do? When might you use it?</p>
<p>The <code>trim</code> argument removes / trims a certain percentage of the observations from each side. In the help page if we consider the examples, notice that the 0 and 50 are trimmed. So the values are sorted, and then the trimming occurs - this makes sense because we don’t want to just arbitrarily chop data, we want to remove <em>outliers</em>.</p>
<p>In the second example we sort 5, 10, 11, …, 19, 20. Then 5 and 20 trimmed.</p>
<pre class="r"><code>x &lt;- c(0:10, 50)
(xm &lt;- mean(x))
#&gt; [1] 8.75
c(xm, mean(x, trim = 0.10))
#&gt; [1] 8.75 5.50
mean(c(1:10))
#&gt; [1] 5.5
mean(c(1:10)) == mean(x, trim = 0.10)
#&gt; [1] TRUE

x &lt;- c(10:20, 5)
(xm &lt;- mean(x))
#&gt; [1] 14.16667
c(xm, mean(x, trim = 0.10))
#&gt; [1] 14.16667 14.50000
mean(c(10:19))
#&gt; [1] 14.5
mean(c(10:19)) == mean(x, trim = 0.10)
#&gt; [1] TRUE</code></pre></li>
<li><p>The default value for the <code>method</code> argument to <code>cor()</code> is <code>c("pearson", "kendall", "spearman")</code>. What does that mean? What value is used by default?</p>
<p>The <code>cor()</code> function can use any one of those values, by default the first is used which is pearson.</p></li>
</ol>
<div id="writing-pipeable-functions" class="section level4">
<h4>Writing pipeable functions</h4>
<p>If you want to write your own pipeable functions, think about the return value. E.g. for dplyr and tidyr the object type is the data frame.</p>
<p>There are two basic types of pipeable functions: <strong>transformations</strong> and <strong>side-effects</strong>.</p>
<ul>
<li>With <strong>transformations</strong>, an object is passed to the function’s first argument and a modified object is returned.</li>
<li>With <strong>side-effects</strong>, the passed object is not transformed. Instead, the function performs an action on the object, like printing or plotting. These functions “invisibly” return the first argument, so that they can still be used in a pipeline.</li>
</ul>
<pre class="r"><code>show_missings &lt;- function(df) {
  n &lt;- sum(is.na(df))
  cat(&quot;Missing values: &quot;, n, &quot;\n&quot;, sep = &quot;&quot;)
  
  invisible(df) # return df invisibly
}</code></pre>
<pre class="r"><code># df does not get printed but it is there
show_missings(mtcars)
#&gt; Missing values: 0</code></pre>
<p>It’s still there, it’s just not printed by default.</p>
<pre class="r"><code>x &lt;- show_missings(mtcars) 
#&gt; Missing values: 0
class(x)
#&gt; [1] &quot;data.frame&quot;
dim(x)
#&gt; [1] 32 11
head(x)
#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>We can use it in a pipe:</p>
<pre class="r"><code>library(dplyr)
mtcars %&gt;% 
  show_missings() %&gt;% 
  mutate(mpg = ifelse(mpg &lt; 20, NA, mpg)) %&gt;% 
  show_missings() 
#&gt; Missing values: 0
#&gt; Missing values: 18</code></pre>
</div>
</div>
<div id="whats-in-a-function" class="section level3">
<h3>What’s in a function?</h3>
<p>Want to see what the code for a function is?</p>
<p>Type the function name with no parantheses.</p>
<p>E.g. <code>lm</code>, <code>factorial</code></p>
<pre class="r"><code>lm
#&gt; function (formula, data, subset, weights, na.action, method = &quot;qr&quot;, 
#&gt;     model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
#&gt;     contrasts = NULL, offset, ...) 
#&gt; {
#&gt;     ret.x &lt;- x
#&gt;     ret.y &lt;- y
#&gt;     cl &lt;- match.call()
#&gt;     mf &lt;- match.call(expand.dots = FALSE)
#&gt;     m &lt;- match(c(&quot;formula&quot;, &quot;data&quot;, &quot;subset&quot;, &quot;weights&quot;, &quot;na.action&quot;, 
#&gt;         &quot;offset&quot;), names(mf), 0L)
#&gt;     mf &lt;- mf[c(1L, m)]
#&gt;     mf$drop.unused.levels &lt;- TRUE
#&gt;     mf[[1L]] &lt;- quote(stats::model.frame)
#&gt;     mf &lt;- eval(mf, parent.frame())
#&gt;     if (method == &quot;model.frame&quot;) 
#&gt;         return(mf)
#&gt;     else if (method != &quot;qr&quot;) 
#&gt;         warning(gettextf(&quot;method = &#39;%s&#39; is not supported. Using &#39;qr&#39;&quot;, 
#&gt;             method), domain = NA)
#&gt;     mt &lt;- attr(mf, &quot;terms&quot;)
#&gt;     y &lt;- model.response(mf, &quot;numeric&quot;)
#&gt;     w &lt;- as.vector(model.weights(mf))
#&gt;     if (!is.null(w) &amp;&amp; !is.numeric(w)) 
#&gt;         stop(&quot;&#39;weights&#39; must be a numeric vector&quot;)
#&gt;     offset &lt;- model.offset(mf)
#&gt;     mlm &lt;- is.matrix(y)
#&gt;     ny &lt;- if (mlm) 
#&gt;         nrow(y)
#&gt;     else length(y)
#&gt;     if (!is.null(offset)) {
#&gt;         if (!mlm) 
#&gt;             offset &lt;- as.vector(offset)
#&gt;         if (NROW(offset) != ny) 
#&gt;             stop(gettextf(&quot;number of offsets is %d, should equal %d (number of observations)&quot;, 
#&gt;                 NROW(offset), ny), domain = NA)
#&gt;     }
#&gt;     if (is.empty.model(mt)) {
#&gt;         x &lt;- NULL
#&gt;         z &lt;- list(coefficients = if (mlm) matrix(NA_real_, 0, 
#&gt;             ncol(y)) else numeric(), residuals = y, fitted.values = 0 * 
#&gt;             y, weights = w, rank = 0L, df.residual = if (!is.null(w)) sum(w != 
#&gt;             0) else ny)
#&gt;         if (!is.null(offset)) {
#&gt;             z$fitted.values &lt;- offset
#&gt;             z$residuals &lt;- y - offset
#&gt;         }
#&gt;     }
#&gt;     else {
#&gt;         x &lt;- model.matrix(mt, mf, contrasts)
#&gt;         z &lt;- if (is.null(w)) 
#&gt;             lm.fit(x, y, offset = offset, singular.ok = singular.ok, 
#&gt;                 ...)
#&gt;         else lm.wfit(x, y, w, offset = offset, singular.ok = singular.ok, 
#&gt;             ...)
#&gt;     }
#&gt;     class(z) &lt;- c(if (mlm) &quot;mlm&quot;, &quot;lm&quot;)
#&gt;     z$na.action &lt;- attr(mf, &quot;na.action&quot;)
#&gt;     z$offset &lt;- offset
#&gt;     z$contrasts &lt;- attr(x, &quot;contrasts&quot;)
#&gt;     z$xlevels &lt;- .getXlevels(mt, mf)
#&gt;     z$call &lt;- cl
#&gt;     z$terms &lt;- mt
#&gt;     if (model) 
#&gt;         z$model &lt;- mf
#&gt;     if (ret.x) 
#&gt;         z$x &lt;- x
#&gt;     if (ret.y) 
#&gt;         z$y &lt;- y
#&gt;     if (!qr) 
#&gt;         z$qr &lt;- NULL
#&gt;     z
#&gt; }
#&gt; &lt;bytecode: 0x0000000027823e50&gt;
#&gt; &lt;environment: namespace:stats&gt;</code></pre>
<p>To figure out what arguments a function takes use <code>args(func_name)</code>.</p>
<pre class="r"><code>args(lm)
#&gt; function (formula, data, subset, weights, na.action, method = &quot;qr&quot;, 
#&gt;     model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
#&gt;     contrasts = NULL, offset, ...) 
#&gt; NULL
args(dplyr::across)
#&gt; function (.cols = everything(), .fns = NULL, ..., .names = NULL) 
#&gt; NULL</code></pre>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()
#&gt; R version 3.6.3 (2020-02-29)
#&gt; Platform: x86_64-w64-mingw32/x64 (64-bit)
#&gt; Running under: Windows 10 x64 (build 19042)
#&gt; 
#&gt; Matrix products: default
#&gt; 
#&gt; locale:
#&gt; [1] LC_COLLATE=English_South Africa.1252  LC_CTYPE=English_South Africa.1252   
#&gt; [3] LC_MONETARY=English_South Africa.1252 LC_NUMERIC=C                         
#&gt; [5] LC_TIME=English_South Africa.1252    
#&gt; 
#&gt; attached base packages:
#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     
#&gt; 
#&gt; other attached packages:
#&gt;  [1] magrittr_1.5    flair_0.0.2     forcats_0.5.0   stringr_1.4.0  
#&gt;  [5] dplyr_1.0.2     purrr_0.3.4     readr_1.4.0     tidyr_1.1.2    
#&gt;  [9] tibble_3.0.3    ggplot2_3.3.2   tidyverse_1.3.0 workflowr_1.6.2
#&gt; 
#&gt; loaded via a namespace (and not attached):
#&gt;  [1] tidyselect_1.1.0 xfun_0.13        haven_2.3.1      colorspace_1.4-1
#&gt;  [5] vctrs_0.3.2      generics_0.0.2   htmltools_0.5.0  yaml_2.2.1      
#&gt;  [9] rlang_0.4.8      later_1.0.0      pillar_1.4.6     withr_2.2.0     
#&gt; [13] glue_1.4.2       DBI_1.1.0        dbplyr_2.0.0     modelr_0.1.8    
#&gt; [17] readxl_1.3.1     lifecycle_0.2.0  munsell_0.5.0    gtable_0.3.0    
#&gt; [21] cellranger_1.1.0 rvest_0.3.6      evaluate_0.14    knitr_1.28      
#&gt; [25] ps_1.3.2         httpuv_1.5.2     fansi_0.4.1      broom_0.7.2     
#&gt; [29] Rcpp_1.0.4.6     promises_1.1.0   backports_1.1.6  scales_1.1.0    
#&gt; [33] jsonlite_1.7.1   fs_1.5.0         hms_0.5.3        digest_0.6.27   
#&gt; [37] stringi_1.5.3    rprojroot_1.3-2  grid_3.6.3       cli_2.1.0       
#&gt; [41] tools_3.6.3      crayon_1.3.4     whisker_0.4      pkgconfig_2.0.3 
#&gt; [45] ellipsis_0.3.1   xml2_1.3.2       reprex_0.3.0     lubridate_1.7.9 
#&gt; [49] assertthat_0.2.1 rmarkdown_2.4    httr_1.4.2       rstudioapi_0.11 
#&gt; [53] R6_2.4.1         git2r_0.26.1     compiler_3.6.3</code></pre>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
